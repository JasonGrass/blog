(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{611:function(t,a,s){"use strict";s.r(a);var n=s(6),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("同一解决方案中，不同工程可能需要引用同一DLL的不同版本（非必须，不推荐）;以下是解决方案。")]),t._v(" "),s("p",[t._v("基本可以参看这里：\n"),s("a",{attrs:{href:"http://blog.csdn.net/dang13579/article/details/72956684",target:"_blank",rel:"noopener noreferrer"}},[t._v("引用不同版本dll"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("备用链接：\n"),s("a",{attrs:{href:"http://blog.csdn.net/wangzl1163/article/details/73162826",target:"_blank",rel:"noopener noreferrer"}},[t._v("引用不同版本dll"),s("OutboundLink")],1),s("br"),t._v(" "),s("a",{attrs:{href:"http://www.cnblogs.com/gudi/p/6958297.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("同一个解决方案或有依赖关系的两个项目引用同名但不同版本的DLL"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("需要额外补充的是：")]),t._v(" "),s("h3",{attrs:{id:"href-应当使用相对路径"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#href-应当使用相对路径"}},[t._v("#")]),t._v(" href 应当使用相对路径")]),t._v(" "),s("p",[t._v("这里的相对路径，是指程序输出目录（"),s("code",[t._v("$(OutDir)")]),t._v("）的相对路径。")]),t._v(" "),s("div",{staticClass:"language-xml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-xml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("dependentAssembly")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("assemblyIdentity")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("LiteDB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("publicKeyToken")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("4ee40123013c9f27"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("culture")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("neutral"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("codeBase")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("2.0.2.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("LiteDB.2.0.2.0\\LiteDB.dll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("codeBase")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("version")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("4.0.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("LiteDB.4.0.0.0\\LiteDB.dll"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("dependentAssembly")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),s("h3",{attrs:{id:"dll文件的-git-管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dll文件的-git-管理"}},[t._v("#")]),t._v(" dll文件的 git 管理")]),t._v(" "),s("p",[t._v("一般输出目录下的内容为自动生成，位于bin目录下，是不会纳入git管理的，所以，需要在程序目录中用一个文件夹管理dll文件，并纳入git仓库。\n再在启动程序的预先生成事件中，利用"),s("code",[t._v("xcopy")]),t._v("指令将dll文件拷贝到输出目录对于位置。如：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("xcopy /E /Y "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("SolutionDir"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("_Externals"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Refs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("LiteDB.2.0.2.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("*.dll "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("OutDir"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("LiteDB.2.0.2.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("  \nxcopy /E /Y "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("SolutionDir"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("_Externals"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("Refs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("LiteDB.4.0.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("*.dll "),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),t._v("OutDir"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("LiteDB.4.0.0.0"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("  \n")])])]),s("p",[t._v("这样，不仅可以将 dll 文件纳入git管理，团队中其它成员拉取你提交的代码后，也不会出现缺少dll不能运行的情况（因为使用了xcopy将dll拷贝到输出目录）。")]),t._v(" "),s("h3",{attrs:{id:"关闭dll引用的-复制到本地"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#关闭dll引用的-复制到本地"}},[t._v("#")]),t._v(" 关闭DLL引用的 复制到本地")]),t._v(" "),s("p",[t._v("为了避免某些诡异的问题，建议关闭DLL引用的 复制到本地 属性。")]),t._v(" "),s("h3",{attrs:{id:"如何避免升级"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何避免升级"}},[t._v("#")]),t._v(" 如何避免升级？")]),t._v(" "),s("p",[t._v("通常，之所以会使用两个版本的 DLL ，是因为兼容性问题，需要读取旧有数据等。则旧版本的引用不能被升级，如何做？")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://walterlv.github.io/post/prevent-nuget-package-upgrade.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("阻止某个 NuGet 包意外升级 - walterlv"),s("OutboundLink")],1)]),t._v(" "),s("hr"),t._v(" "),s("p",[t._v("END")])])}),[],!1,null,null,null);a.default=e.exports}}]);