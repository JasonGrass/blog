(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{512:function(e,t,r){e.exports=r.p+"assets/img/599d0f25gy1fv853k13hjj20go0b4dg9.5acb0c54.jpg"},513:function(e,t,r){e.exports=r.p+"assets/img/599d0f25gy1fwjb14f4mcj20i305agma.dd553136.jpg"},604:function(e,t,r){"use strict";r.r(t);var s=r(6),a=Object(s.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("用于批量替换C#解决方案中的DLL引用(At VisualStudio)。这是一篇使用指南。\n介绍可以看"),s("a",{attrs:{href:"http://jasongrass.gitee.io/2017-10-VS%E5%A4%9A%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E8%81%94%E8%B0%83/",target:"_blank",rel:"noopener noreferrer"}},[e._v("这里"),s("OutboundLink")],1)]),e._v(" "),s("p",[s("img",{attrs:{src:r(512),alt:""}})]),e._v(" "),s("h2",{attrs:{id:"目的"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#目的"}},[e._v("#")]),e._v(" 目的")]),e._v(" "),s("p",[e._v("进行源码调试。\n通常，我们使用DLL引用（或 Nuget 引用），但这样很不方便调试，尤其对于内部项目之间，明明两边的代码都有，为啥不能联合调试呢。")]),e._v(" "),s("h2",{attrs:{id:"原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#原理"}},[e._v("#")]),e._v(" 原理")]),e._v(" "),s("p",[e._v("将所有引用目标DLL的工程文件（.csproj文件）中的引用替换为 "),s("code",[e._v("ProjectReference")]),e._v("。 引用目标DLL对于的工程文件（.csproj）。")]),e._v(" "),s("h2",{attrs:{id:"使用步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用步骤"}},[e._v("#")]),e._v(" 使用步骤")]),e._v(" "),s("p",[e._v("入口："),s("br"),e._v(" "),s("img",{attrs:{src:r(513),alt:""}})]),e._v(" "),s("ol",[s("li",[e._v('点击 "SELECT .CSPROJ FILE" 按钮。')]),e._v(" "),s("li",[e._v("选择目标工程的 csproj 文件。")]),e._v(" "),s("li",[e._v('点击 "REPLACE REFERENCE" 按钮完成替换。')])]),e._v(" "),s("p",[e._v("这时VS会提示你重新加载解决方案，重新加载之，之后此解决方案中所有的引用就是新指定的引用了。")]),e._v(" "),s("ul",[s("li",[s("p",[e._v("撤销是怎么做的？"),s("br"),e._v("\n因为替换的操作，其实就是对csproj文件的操作，撤销，就是把csproj恢复原样咯。"),s("br"),e._v("\n这里使用的是git命令checkout。\n所以，在替换之前，会检测是否有 csproj 文件和 sln 文件的修改，如果有，会提示不能替换，除非取消勾选下方的 "),s("code",[e._v("Use git checkout command when Undo")]),e._v("。")])]),e._v(" "),s("li",[s("p",[e._v("取消勾选了 "),s("code",[e._v("Use git checkout command when Undo")]),e._v(" 会怎么样?\n1、将不能使用撤销按钮进行撤销操作。"),s("br"),e._v("\n要撤销怎么办？ - 敲命名 "),s("code",[e._v("git checkout *.csproj")]),e._v(" 和 "),s("code",[e._v("git checkout *.sln")]),s("br"),e._v("\n注意，自己不能有对 csproj 文件的修改哦。")])])]),e._v(" "),s("p",[e._v("2、可以替换多个DLL引用。"),s("br"),e._v("\n取消勾选之后，不会对 csproj 文件的修改进行检查，所以可以任意替换。")]),e._v(" "),s("ul",[s("li",[e._v("替换之后，关闭了 VS ， 怎么撤销？"),s("br"),e._v("\n参考上面第1条。")])]),e._v(" "),s("h4",{attrs:{id:"相关知识"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相关知识"}},[e._v("#")]),e._v(" 相关知识：")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://stackoverflow.com/questions/275689/how-to-get-relative-path-from-absolute-path",target:"_blank",rel:"noopener noreferrer"}},[e._v("How to get relative path from absolute path"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://stackoverflow.com/questions/1063459/net-reference-specificversion-true-or-false",target:"_blank",rel:"noopener noreferrer"}},[e._v(".net reference specificversion true or false?"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://stackoverflow.com/questions/1882038/hintpath-vs-referencepath-in-visual-studio",target:"_blank",rel:"noopener noreferrer"}},[e._v("HintPath vs ReferencePath in Visual Studio"),s("OutboundLink")],1)])]),e._v(" "),s("blockquote",[s("p",[e._v("There is a search order for assemblies when building. The search order is as follows:")])]),e._v(" "),s("ul",[s("li",[e._v("Files from the current project – indicated by ${CandidateAssemblyFiles}.")]),e._v(" "),s("li",[e._v("$(ReferencePath) property that comes from .user/targets file.")]),e._v(" "),s("li",[e._v("%(HintPath) metadata indicated by reference item.")]),e._v(" "),s("li",[e._v("Target framework directory.")]),e._v(" "),s("li",[e._v("Directories found in registry that uses AssemblyFoldersEx Registration.")]),e._v(" "),s("li",[e._v("Registered assembly folders, indicated by ${AssemblyFolders}.")]),e._v(" "),s("li",[e._v("$(OutputPath) or $(OutDir)")]),e._v(" "),s("li",[e._v("GAC")])]),e._v(" "),s("h4",{attrs:{id:"相关链接"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#相关链接"}},[e._v("#")]),e._v(" 相关链接：")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/JasonGrass/DllReferencePathChanger",target:"_blank",rel:"noopener noreferrer"}},[e._v("Github"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://marketplace.visualstudio.com/items?itemName=Jasongrass.DLLReferencePathChangeAuto",target:"_blank",rel:"noopener noreferrer"}},[e._v("Visual Studio Marketplace"),s("OutboundLink")],1)])])])}),[],!1,null,null,null);t.default=a.exports}}]);